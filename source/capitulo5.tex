\chapter[Prova de Conceito da Plataforma]{Prova de Conceito da Plataforma}

Uma vez implementada a plataforma de simulação é necessário submete-la a uma
utilização dirigida para o fim para o qual foi concebida. Tendo isto em
atenção, este capítulo apresenta a implementação de dois protocolos de
encaminhamento de dados em RSSF. O primeiro trata-se de um protocolo simplista,
encaminhamento por \textit{inundação }, que visa, fundamentalmente, demonstrar a
facilidade de implementação de um primeiro protocolo e ao mesmo tempo servir de
termo de comparação com um protocolo seguro. O segundo protocolo, é um
protocolo de encaminhamento seguro de referência, o INSENS\cite{INSENS}.
Esta implementação, visa, não só comprovar que é possível implementar, avaliar e
experimentar protocolos de especificação mais complexa, mas também contribuir
com uma análise critica deste protocolo em critérios de segurança e no seu
impacte nas propriedades que se podem avaliar com recurso à plataforma de
simulação.

\section{Implementação de protocolo de encaminhamento por inundação}
Como já foi referido para efeito de comparação de algumas das propriedades em
avaliação foi desenvolvido um primeiro protocolo mais simples que implementa o
encaminhamento por inundação (\textit{flooding}). Este protocolo não tem grande
complexidade de funcionamento, uma vez que a única restrição para a propagação
de mensagens é a garantia de não repetição de mensagens. 

A implementação define no total cinco classes, respeitando as duas componentes
referidas anteriormente. As entidades representadas são: Um tipo de mensagem,
uma fábrica de nós, um nó específico e o algoritmo de encaminhamento, para
efeitos de teste foi criada uma aplicação simples que envia uma mensagem de
Hello. No diagrama de classes da figura seguinte apresenta-se esta organização.

APRESENTAR DIAGRAMA AQUI

O protocolo implementado tem o seguinte funcionamento:


\section{Implementação de Protocolo de Encaminhamento Seguro em RSSF}
O algoritmo que serviu como prova de conceito para a utilização da plataforma
na avaliação de protocolos de encaminhamento seguro foi o INSENS. O
desenvolvimento deste protocolo permitiu rever algumas funcionalidades da
plataforma, desenvolvidas até então, fazendo com que se desse a
incorporação de mecanismos facilitadores quer ao nível da implementação, quer
ao nível das capacidades de avaliação da plataforma. Uma abstracção
que surgiu da implementação deste protocolo foram os \textit{timers}, muito
semelhante aos implementados nas plataformas de TinyOS, que permitem temporizar
acções, com base num relógio interno. Uma vez identificada esta funcionalidade,
foi integrada no simulador base por forma a poder ser utilizada de forma
genérica na implementação de um qualquer protocolo.\\

O código executado nas plataformas sensores é muito semelhante e somente
diferenciado pelos papeis que podem ser desempenhados por um sensor. Neste
protocolo identificaram-se dois tipos de papeis: 1) estação base, que controla
todo o fluxo da informação e que serve como \textit{Trusted Computer Base} uma
vez que é o único elemento que se garante que é totalmente seguro; 2) Sensor
genérico, encaminhador e gerador de eventos. Uma vez tratando-se de uma
plataforma de simulação a selecção dos sensores que executam as tarefas de cada
um dos papeis identificados é especificada pelo próprio desenho da
experiência. No que respeita às operações executadas pela estação base
apresentam-se a seguir as que têm maior importância ao longo do estabelecimento
da rede:

\input{tab_operacoes_sensores}

Apresentadas as operações principais da estação base, os restantes sensores
executam também um conjunto de operações das quais se destinguem as seguintes:
\input{tab_operacoes_sensores_normais}

Do ponto de vista da implementação foram respeitadas as API's da plataforma
para permitir a sua integração. Assim, a figura seguinte apresenta o diagrama de
classes da implementação do protocolo INSENS.
\input{pic_INSENS_CD}