\chapter{Introdução} \label{cap:introducao}
\onehalfspacing
\section{Introdução geral} \label{sect:introducao}
Recentemente, têm-se observado avanços na concepção e fabrico de sistemas computacionais
programáveis, baseados em \textit{hardware} de pequena dimensão, \cite{MEMS} com capacidade para
desempenhar tarefas específicas. Estes avanços permitiram integrar, nesses sistemas, processadores
miniaturizados, memória, dispositivos de processamento de sinal e de conversão analógica-digital
para a detecção de diferentes fenómenos físicos (através de diversos tipos de sensores) e
capacidades de comunicação sem fios por rádio frequência (com base nas normas 802.15.4 
\cite{ietf_802154,zigbee_802154} e Zigbee \cite{zigbee_802154}). A possibilidade
de construção
destes dispositivos (que se designam mais simplesmente por nós sensores) fez surgir, nos últimos
anos, um novo campo da investigação, conhecido por redes de sensores sem fios
(RSSF).

Uma RSSF é formada por um conjunto de dispositivos com as características descritas anteriormente,
distribuídos numa certa área geográfica, que podem funcionar de forma autónoma ou sem supervisão
humana. Estas redes permitem monitorizar, com maior ou menor densidade, diferentes fenómenos físicos
associados ao meio ambiente envolvente. As RSSF possuem características de auto-organização, podendo
ser formadas por um menor ou maior número de sensores, permitindo cobrir desde pequenas a vastas
áreas de monitorização. Um ambiente de instalação de uma rede pode ser um edifício, uma instalação
industrial, uma área de combate, uma vasta zona de monitorização de um habitat natural, um veículo
ou o próprio corpo humano \cite{apps_tracking,app_monitor,app_health,Akyildiz2002}.

O componente básico e fundamental de uma rede de sensores é, pois, o nó sensor
(também designado por
\textit{mote}) \cite{mica2_datasheet, btnodes,sunspotworld,micaz}. Cada um destes nós constitui um
substrato computorizado que pode possuir diversos sensores para monitorizar, por exemplo,
temperatura, luz, movimento e outros fenómenos físicos, consoante as necessidades das aplicações.
Sendo um dispositivo miniaturizado e concebido para possuir um baixo custo de produção, apresenta um
poder de computação limitado, baixa largura de banda de comunicação, curto alcance de comunicação
rádio e energia autónoma limitada (com base em baterias do tipo AAA ou de células fotovoltaicas) 
\cite{Yick2008}. Numa RSSF a energia pode constituir um recurso finito. Em certos ambientes de
instalação pode não ser possível, ou viável, realizar operações que exijam intervenção ou supervisão
humana, por exemplo, para o carregamento ou substituição de baterias. Conhecidas estas limitações,
para se poderem atingir distribuições de grande cobertura geográfica, os sensores têm de ser
distribuídos em grande número, podendo-se também, por esse meio, aumentar a redundância dos nós que,
assim, formam redes de larga escala que chegam a atingir milhares de nós.

Os \textit{motes} podem diferir uns dos outros consoante a sua função na rede e poderão desempenhar,
fundamentalmente, dois papeis: nó genérico gerador de informação (\textit{source-nodes}) e nó base
ou de sincronização (nó colector de dados da rede ou de execução de comandos de pesquisa). Numa RSSF
os nós podem também actuar como nós de interligação (ou de encaminhamento e processamento intermédio
através da rede) ou \textit{gateways } (que permitem ligar o ambiente da rede de sensores a outras
redes e sub-sistemas externos). Uma RSSF pode ser concebida de forma a ser interligada a outras
infraestruturas computacionais que, com maior capacidade de armazenamento e processamento, permitem
efectuar análise de dados coligidos. Na tecnologia actual existem ainda nós de desenvolvimento, que
possuem ligações a computadores (ex: ligação de rede \textit{Ethernet}, RS-232 ou USB), permitindo o
carregamento expedito de código em estações de desenvolvimento. Os
sensores dotados de ligações Ethernet, RS-232 ou USB podem ainda funcionar como nós de tipo
\textit{gateway},
permitindo, num cenário concreto, ligar a rede de sensores a aplicações, executando em sistemas de
computadores usuais \cite{gateways}.
\subsection{Redes de Sensores Sem Fios - RSSF}
\label{sect:subsec_caracterizacao_wsn}
As redes de sensores sem fios podem ser abordadas como um caso especial de redes
\textit{ad-hoc},
embora exibam características específicas \cite{Corson1999}. As RSSF para aplicações de larga escala
fazem emergir algumas problemáticas inerentes a aplicações distribuídas, com especificidades e
desafios próprios \cite{Coulouris_sd4ed}, nomeadamente ao nível dos mecanismos de gestão, da
organização topológica autónoma, das necessidades de sistemas de encaminhamento\textit{ multi-hop},
de requisitos de tolerância a falhas, de requisitos de escalabilidade ou de necessidade de serviços
de segurança. 
\subsection{Aplicações}
Muitas foram as aplicações \cite{Akyildiz2002,Kuorilehto2005} encontradas na investigação ou na
utilização emergente de RSSF com diferentes requisitos de escala \cite{Yick2008}. O carácter
autónomo destas redes oferece um sem número de vantagens que propicia a sua utilização em locais
remotos de acessibilidade difícil e onde não é possível a sua manutenção e supervisão. De entre as
aplicações das RSSF, podem destacar-se as seguintes: 
\begin{descriptionNoIndent}
 \item \textbf{Detecção de alvos/objectos (\textit{Target Tracking}):} 
\cite{apps_tracking}
associada à detecção de movimento (trajectória/presença) em áreas vigiadas (como, por exemplo, em
teatros operacionais militares ou na vigilância e monitorização de recursos ou infraestruturas);
 \item \textbf{Monitorização de fenómenos naturais:}  \cite{app_monitor}
associada à detecção de eventos ou anomalias ambientais (com aplicações na agricultura,
monitorização de poluição ou monitorização de habitats naturais), bem como de vigilância ou controlo
de fenómenos naturais (sismos, actividade de vulcões, etc);
 \item \textbf{Recolha de dados:} \cite{app_health} associada ao controlo de indicadores físicos ou
biomédicos de pessoas ou de animais (com recurso a sensores especiais, associados a aplicações da
medicina) ou como ambientes de monitorização de operação de infraestruturas críticas (pontes,
edifícios, sistemas electromecânicos ou equipamentos de instalações fabris). 
\end{descriptionNoIndent}
\section{Segurança em RSSF} \label{sect:seguranca_rssf}
A segurança nas RSSF é, \textit{de facto}, um problema, quando se perspectiva a sua utilização para
sistemas críticos. A segurança deve ser pensada em tempo de concepção \cite{Perriga}, tendo em
vista a abrangência do sistema e tendo em atenção as particularidades específicas da tecnologia
inerente, bem como dos ambientes onde são implementadas. Importa analisar as hipóteses de
desencadeamento de ataques a estas redes (a partir da definição de modelos de adversário) bem como
as repercussões das potenciais tipologias de ataques que representem o modelo de
adversário \cite{Attaks_defenses_sec_in_wsn,Karlof2003}. Esta análise deve ser feita tendo em conta
a pilha de protocolos \cite{Akyildiz2002} e de serviços
associados ao \textit{software} \cite{tinyos,contiki,Karlof2004,SPINS} que executa em cada nó, uma
vez que cada uma das camadas de serviços e protocolos pode ser vulnerável a esses ataques. 

Na abordagem de uma plataforma usual e genérica para um nó de uma RSSF, verifica-se que, em geral,
cada nó apresenta uma pilha minimalista de protocolos e serviços, por comparação com uma pilha
associada a uma rede de computadores usual (ex., TCP/IP ou pilha OSI) \cite{sd_tanenbaum}. As
limitações impostas pelas dimensões e as capacidades de operação não permitem uma arquitectura muito
ambiciosa e, por outro lado, as RSSF possuem geralmente uma vocação orientada para aplicações
específicas, que condicionam os serviços que devem ser suportados na pilha. As camadas de operação
de um nó sensor são essencialmente cinco \cite{Akyildiz2002}: camada física, camada de ligação de
dados, camada de rede, camada de transporte e camada de aplicação. Todavia, na maior parte dos
casos, a camada de transporte de dados e a funcionalidade inerente à camada de rede são concebidas
de forma mais ou menos específica, tendo em vista as características particulares das aplicações. Na
investigação, verifica-se ainda que a camada de ligação de dados (nível MAC e protocolos data-link)
foram objecto de várias propostas, com diferentes variantes que podem apresentar vantagens
particulares, dados os requisitos de operação das aplicações \cite{BMAC,SMAC,mac_protocols}.
\input{pic_stack_services}
Alguns autores \cite{SIGF,INSENS,clean_slate} têm vindo a desenhar algoritmos com vista a minimizar
o impacte dos ataques ao encaminhamento, durante a operação das RSSF. Estes algoritmos pretendem
garantir algumas propriedades básicas de segurança \cite{perrig_design_sec_sensor} (ex:
confidencialidade, integridade, autenticação, detecção de retransmissão ilícita de dados). Não
obstante, devem ser consideradas outras tipologias de ataques especificamente associados ao suporte
de encaminhamento de dados na rede. Diferentes protocolos de encaminhamento seguro em RSSF endereçam
apenas algumas dessas tipologias mas, em geral, não contemplam contra-medidas globais face a todas.
Por outro lado, muitas das propostas apresentadas têm por base modelos matemáticos, análises
teóricas ou experiências de pequena dimensão. Torna-se importante que esse estudo teórico seja
complementado e verificado, tendo em conta o desempenho desses protocolos com análises experimentais
mais próximas dos ambientes reais em que a rede opera. Para tal, o recurso a ambientes de simulação
torna-se uma direcção importante de apoio a este estudo.
\section{Objectivos e contribuições} \label{sect:solucao}
Uma das vertentes do estudo da segurança em RSSF tem que ver com a possibilidade de se poderem
efectivar ataques ao nível do encaminhamento de dados (da pilha de suporte de serviços de
\textit{software}, \figurename{ \ref{fig:stack_serv}}). Diferentes tipologias de ataques 
\cite{Karlof2003,Hu2004,Perriga} exigem diferentes tipos de contra-medidas. Estas, normalmente, são
combinadas em mecanismos de segurança, consoante as propostas de sistemas de encaminhamento seguro.
Estes são implementados tendo em conta as características e o modo de operação das RSSF
\cite{SPINS,Luk2007d,Karlof2004}. 

Conhecidas que estão as dificuldades existentes no estudo de protocolos de encaminhamento
seguro \cite{Karlof2003,Sec_WSN_Vulnerabilities}, estes permanecem como um dos aspectos em aberto e
como um desafio à concepção de RSSF que operem em condições de segurança. Este desafio é tanto mais
relevante quando a análise de segurança pode envolver a avaliação de diferentes modelos e hipóteses
de adversário \cite{Dolev1983,Parno2005} e tipologias de
ataques \cite{Attaks_defenses_sec_in_wsn,Karlof2003}. Estas tipologias nem sempre são estudadas de
forma sistemática e comparativa na abordagem a diferentes protocolos de
encaminhamento seguro que
vão sendo propostos. Por outro lado, existe uma dificuldade adicional em poder conjugar-se o estudo
das contra-medidas de segurança importantes com a sua avaliação experimental face à implementação.
Para cada protocolo interessa medir o impacte que diferentes tipologias de ataques podem
ter, nomeadamente, em cenários de grande escala, o que exige a utilização de sistemas de simulação
\cite{ns2,jsim,SENSE,shox,jprowler,freemote} de RSSF que permitam simular diferentes hipóteses de
ataque e antecipar o seu impacte. Este impacte deve ser analisado não apenas no
que se refere ao
comportamento dos protocolos mas, complementarmente, no que diz respeito à forma
como afectam a própria
rede, nomeadamente em termos de consumo de energia, fiabilidade e latência. Um
sistema que suprima
estas dificuldades contribui para um mais rápido desenvolvimento e uma afinação mais cuidada de
determinados parâmetros dos protocolos, com vista a garantir as propriedades de segurança desejadas
para o ambiente de operação das RSSF, em condições mais realistas.

No âmbito deste trabalho foi concebido e desenvolvido um sistema de simulação
inovador, uma vez que conjuga a facilidade de 
desenhar/configurar a  topologia da rede (com recurso a um ambiente gráfico),
com a existência de ferramentas generalistas para análise do comportamento das
RSSF, com ou sem ataques dirigidos à rede. Assim, este sistema permite o estudo
sistemático de protocolos de encaminhamento, quer sejam desenhados ou não para
serem seguros, e possui, em particular, as
seguintes funcionalidades: 
\begin{itemize}
\item Interface de visualização e configuração da rede com informações dos parâmetros de simulação e
informação de cada nó (por exemplo, o seu estado energético, identificador,
camadas da pilha); 
\item Implementação de um modelo de energia que permite extrair consumos em diferentes momentos de
operação: operação normal e operação perante determinado ataque; 
\item Modelo de geração de topologias, podendo estas ser definidas como: distribuição
aleatória, distribuição em grelha, distribuição controlada (estruturada); 
\item Mecanismo de introdução de falhas/ataques na rede. Com este mecanismo pretende-se permitir o
estudo do comportamento dos protocolos face à possibilidade de introduzir ataques tipificados; 
\item Utilitários de recolha de dados da simulação, em tempo real e em tempo diferido, que permitam
a extracção de medições referentes a propriedades importantes, como consumos de
energia, latência, cobertura e fiabilidade disponibilizando-os de forma
gráfica. 
\end{itemize}
Com a concepção deste ambiente de simulação, para além de se contribuir com uma
plataforma orientada para o estudo, sistemático e comparativo, de diferentes
protocolos de encaminhamento seguro em RSSF, numa perspectiva da avaliação de
condições de segurança e fiabilidade do encaminhamento de dados. Contribui-se
ainda, com a implementação de um protocolo de encaminhamento seguro de
referência. Este protocolo, o INSENS, constitui uma base de comparação com 
protocolos emergentes, servindo simultaneamente como prova de conceito da
utilização da plataforma. A definição de uma metodologia de
avaliação pré-definindo um conjunto de topologias, testes, ataques e
parametrizações  possibilita a sua reutilização na avaliação de outros
protocolos, com uma análise comparativa dos resultados. Esta avaliação é
referente ao impacte que os mecanismos de segurança têm sobre propriedades tão
importantes como: o consumo de energia, a cobertura da rede, a latência das
comunicações, e fiabilidade da rede. Estas propriedades que são,
normalmente,extrapoladas da implementação experimental em pequena escala ou da
adopção de modelos matemáticos, os quais, devido a variáveis externas, próprias
do ambiente de operação, se podem  afastar bastante dos resultados reais, podem
com este ambiente ser afinadas de forma iterativa por forma a se aproximarem o
mais possível de valores e comportamentos reais.