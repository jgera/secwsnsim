\chapter[Implementação da plataforma de simulação]{Implementação da plataforma
de simulação}\label{cap:implementacao}
Neste capitulo é apresentada a implementação do simulador. Inicialmente
apresentam-se as principais funcionalidades, de seguida descrevem-se alguns
detalhes dos componentes mais importantes, quer pela apresentação de diagramas,
quer pela apresentação de alguns excertos de código. O projecto está disponível
em código aberto, conta com cerca de 236 classes e 31000 linhas de código em
Java (JDK 1.6). É possível aceder de forma gratuita a partir do
sitio: http://code.google.com/p/secwsnsim/. 
\section{Principais funcionalidades}
As principais funcionalidades que se encontram na versão actual da
plataforma que se encontra disponível no sitio acima referido são:

\subsection{Portabilidade}  
Uma vez que foi integralmente desenvolvido em Java, pode ser executado em
qualquer plataforma independente do sistema operativo. O ambiente gráfico foi
desenvolvido com recurso a um tema nativo por forma a manter o mesmo aspecto em
qualquer sistema operativo.
\subsection{Extensibilidade} 
Alguns padrões da engenharia de software foram utilizados, com vista a facilitar
a extensão de funcionalidades do ambiente de simulação. Foram usados padrões de
\textit{Factories}(para criação de objectos de forma generalizada),
\textit{Singleton} (facilitar o acesso a funcionalidades transversais) e
\textit{Publish-Subscribe} (notificação de eventos, por exemplo: Notificação de
inicio e fim de execução da simulação ).

Os componentes mais importantes da RSSF foram mantidos abstractos por forma a
permitir especializações dependendo do protocolo/aplicação que se pretende
avaliar (exemplo: \textit{MACLayer, RoutingLayer, RadioModel, Application,
Message}, etc).

\subsection{Usabilidade}
Com a existência de um ambiente gráfico rico, é possível controlar todo o ciclo
de simulação a partir da consola de visualização. De uma forma geral é
possível: 
\begin{description}
 \item [Distribuição de sensores] Possibilidade de movimentar sensores,
adicionar ou remover um grupo ou apenas um sensor numa área seleccionada;
 \item [Estados e informação dos sensores] Possibilidade de
consultar/visualizar o estado e informação de cada sensor (exemplo: posição,
altitude, energia ) e alterar estado de um sensor individualmente ou de um grupo
de sensores (exemplo: ligar/desligar, alterar altitude, activar visualização de
vizinhos);
\item [Pesquisa de sensores] Uma vez que uma simulação pode ter milhares de nós
é possível encontrar qualquer sensor com base no seu identificador único;
\item [Controlo da simulação] Possibilidade de iniciar/parar/terminar uma
simulação através da consola de simulação.
\item [Depuração de erros/mensagens] Visualização integrada de mensagens/erros
enviados usando a primitivas Java para a consola de sistema, para a consola de
visualização;
\item [Construção de uma simulação] Disponibilização de uma ferramenta para
desenho de configurações para simulação;
\item [Construção de testes] Disponibilização de uma ferramenta para
especificação de condições de testes que permitem avaliar um protocolo em
estudo;
\end{description}
\subsection{Facilidades}
\begin{enumerate}
 \item Capacidade para fazer persistir algumas das configurações entre
simulações por forma a permitir a reutilização em diferentes protocolos;
\item Introdução de imagens de fundo para simulação de ambientes de
distribuição de redes;
\item Definição de parâmetro  relacionado com o ambiente permitindo simular
a indução de comportamentos derivados do meio ambiente ( ex: atenuação causada
pela humidade do ar nas comunicações rádio, altura do solo a que um sensor esta
colocado);
\item Funcionalidade para tirar fotografia da rede, permitindo retirar uma
imagem do estado da rede tal como ele é visto na consola de visualização; 
\item Customização das cores de visualização da consola por forma a ajustar
face a diferentes imagens de fundo;
\item Obtenção de resultados dos testes executados;
\end{enumerate}
\section{Implementação dos componentes da plataforma} 
Nesta secção serão dados alguns detalhes ao nível da engenharia de software
expondo o modo como foram implementados alguns componentes e alguns princípios
tidos em conta no seu desenvolvimento. Realça-se fundamentalmente a
implementação dos seguintes componentes: i) modelação dos sensores; ii) modelo
de energia; iii) modelo de avaliação e testes; iv) modelo de injecção de ataques
v) API para a implementação de um protocolo.
\input{capitulo4_sensores}
\input{capitulo4_energia}
\input{capitulo4_medicao}
\input{capitulo4_API}
