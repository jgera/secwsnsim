%REVISTO
\subsection{Arquitectura de Serviços de Segurança em
RSSF} \label{sect:subsec_arq_security_wsn}
Num sistema seguro, é necessário que a segurança esteja integrada em cada um dos seus componentes, 
não se confinando a um componente isolado do sistema\cite{sec_in_wsn_perrig}.
Assim, nesta secção apresenta-se, introdutoriamente, alguns requisitos de segurança de uma RSSF e 
alguns serviços de segurança, que foram implementados com o objectivo de
representarem um ponto de partida para a garantia de propriedades de segurança, a quando do desenho
de RSSF seguras.
\subsubsection{Requisitos de segurança de uma RSSF}
Os requisitos de segurança de uma RSSF podem variar consoante as especificidades da aplicação que a
rede visa suportar. No entanto, apresentam-se, de forma genérica, os principais requisitos de
segurança de uma RSSF\cite{sec_in_wsn_perrig}:
\begin{description}\descvspace
 \item[Autenticação]
Devido ao meio de comunicação ser partilhado, é necessário recorrer à autenticação para garantir a
detecção de mensagens alteradas ou injectadas no sistema por participantes não
 autorizados\cite{sec_in_wsn_perrig}. Note-se que a implementação de criptografia assimétrica
contribui para a garantia desta propriedade, mas ainda existe muito esforço a desenvolver neste
campo dadas as limitações das RSSF e as exigências computacionais e energéticas destes
mecanismos.
 \item[Confidencialidade]
Sendo a RSSF uma infraestrutura baseada fundamentalmente na disseminação de dados recolhidos a
partir de sensores que se encontram distribuidos em ambiente não controlado e, normalmente, de
fácil acesso,  é necessário garantir a confidencialidade dos dados que circulam na rede.
Assim, o uso de mecanismos de criptografia é o mais indicado para este tipo de protecção.Desta
forma, é necessária a utilização de algoritmos de encriptação fiáveis (ex:
AES\footnote{\textit{Advenced Encryption System algorithm}}\cite{Stallings2005},
ECC\cite{Stallings2005}) para garantir
um determinado nível de segurança, para isso existe a necessidade de partilhar chaves de sessão por
todos os \textit{end-points} e como tal deve-se recorrer a esquemas de distribuição de
chaves\cite{eschenauer2002}.
 \item[Disponibilidade]
Entende-se por disponibilidade de uma rede, a garantia de que esta funciona efectivamente
durante o seu tempo de operação. Os ataques por negação de serviço (Denial of Service -
DoS)\cite{Hu2005} são os mais frequentes para diminuir a disponibilidade de uma rede. Então, para
além de mecanismos que evitem a negação de serviço, é necessário garantir que a degradação da
rede (ex: na presença de um ataque ) seja controlada e que vá sendo proporcional ao número de nós
comprometidos.
 \item[Integridade]
A integridade garante que os dados recebidos por um nó não foram alterados, por um
adversário, durante a transmissão. Em alguns casos esta propriedade é garantida juntamente com a
autenticação, usando mecanismos que permitam garantir ambos numa só operação. Por exemplo, o uso de
CMAC's\cite{Stallings2005} é vulgar uma vez que permite autenticar (uso de critografia simétrica)
a mensagem e para garantir a integridade da mensagem.\cite{SPINS}.
\item[Frescura]
A frescura de uma mensagem implica que estes sejam recentes, garantindo que esta não é antiga
e não foi reenviada por um qualquer adversário. \cite{SPINS,Luk2007d} Podem-se considerar dois tipos
de frescura: frescura fraca (garantindo ordem parcial e sem informação do desvio de tempo, usada
para as medições dos sensores) e frescura forte (garante ordem total em cada
comunicação permitindo estimar o atraso, usada para a sincronização de tempo).
 \end{description}
\subsubsection{Serviços de Segurança}
Alguns serviços de segurança têm vindo a ser desenvolvidos para as RSSF com vista a garantir a
segurança ao nível da comunicação (ex: criptografia, assinaturas, \textit{digests}). Estes serviços
permitem que o arquitecto de sistemas se centre em outras problemáticas relacionadas com o
comportamento dos protocolos face outros ataques. Apresentam-se de seguida alguns serviços mais
comuns:
\begin{description}\addtolength{\itemsep}{-0.5\baselineskip}
\item[TinySec\cite{Karlof2004}]
TinySec é uma arquitectura de segurança para protecção ao nível de ligação de
dados em RSSF. O objectivo principal, para o qual foi desenhado, é providenciar
um nível adequado de segurança com o mínimo consumo de recursos. Os serviços de
segurança  disponibilizados são: autenticação de dados (com a utilização de
\textit{Message Authentication Codes}(MAC)\cite{Stallings2005}, no caso CBC-MAC\footnote{Cipher
Block Chaining - Message Authentication Code (CBC-MAC))}) e confidencialidade (CBC-MAC).
Não implementa nenhum mecanismo que garanta a frescura das mensagens, tornando-o vulnerável a
ataques de \textit{replaying}).
\item[MiniSec\cite{Luk2007d}]
Minisec é uma camada de rede concebida para possuir baixo consumo de energia, melhor que o TinySec,
e alta segurança. Uma das caracteristicas principais, que a tornam mais eficiente, é o uso do modo
\textit{offset codebook} (OCB)\cite{Stallings2005}  para encriptação de blocos. O que permite numa
única passagem autenticar e encriptar os dados, sem com isso aumentar o tamanho da mensagem em
claro, contribuindo para um menor consumo de energia. Esta arquitectura tem dois modos de operação:
uma baseado paracomunicação \textit{unicast} (MINISEC-U) e outro para \textit{broadcast}
(MINISEC-B). Sendo que a segunda não necessita de manter o estado (sincronização de contadores) por
cada emissor por forma a proteger o reenvio escalando para grandes redes.
\item[SPINS\cite{SPINS}]
Conjunto de protocolos de segurança, constituído por dois componentes
principais SNEP\footnote{Secure Network Encryption Protocol} \cite{SPINS} e
${\mu}$TESLA \cite{SPINS}. O primeiro, fornece serviços de autenticação e
confidencialidade entre dois pontos de comunicação, encriptando as mensagens (com
o modo CTR\footnote{\textit{Counter Mode}}) e protegendo-as com um MAC (autenticação com CBC-MAC). O
SNEP gera diferentes chaves, de encriptação, que derivam de uma chave mestra partilhada entre os
dois nós, com umcontador de mensagens para garantir a frescura. O segundo componente,o
${\mu}$TESLA\cite{Luk2006}, é um serviço de autenticação de \textit{broadcast}, que evita a
utilização de mecanismos, mais exigentes, de criptografia assimétrica, recorrendo a critografia
simétrica, autenticando as mensagens com um MAC, 
\item[Norma IEEE802.15.4\cite{ietf_802154}]
Esta norma define a especificação da camada física e de controlo de acesso ao meio das redes
pessoais de baixa potência (\textit{LRPAN}\footnote{Low Rate Personal Area Networks}). Foca-se
essencialmente na comunicação entre dispositivos relativamente próximos, sem a
necessidade de uma infrastrutura de suporte, explorando o mínimo de consumo de energia. É a norma
que já se encontra implementada em algumas plataformas das RSSF. (ex: Micaz\cite{micaz}).
Esta norma, especifica alguns serviços de segurança\cite{zigbee_802154}, representam uma primeira
linha de protecção contra ataques à infraestrutura. Estes mecanimos são os seguintes: i) Cada
dispositivo mantém uma lista de controlo de acessos (ACL) dos dispositivos confiáveis
filtrando comunicações não autorizadas; ii) Encriptação de dados, partilha de uma chave
criptográfica entre os intervenientes na comunicação; iii) Serviço de integridade de cada
\textit{frame}, adicionando a cada frame uma \textit{Message Integrity Code}
(MIC)\cite{Stallings2005}; iv) Garantia de frescura de mensagens (\textit{Sequential Freshness}),
utilizando contadores de frames e de chaves.
\item[ZigBee\cite{zigbee_802154,zigbee}]
Com a norma 802.15.4 orientada para as duas camadas mais baixas da pilha de
protocolos das RSSF (física e MAC), a norma ZigBee define as especificações para
a camada de rede e aplicação. Já incorpora alguns serviços de segurança, nomeadamente: i) Frescura,
mantendo contadores associados a cada chave de sessão, que são reiniciados em cada mudança de chave;
ii) Integridade, com opções de integridade de mensagens que vão desde os 0 aos 128 bits de
verificação; ii) Autenticação, ao nível de rede e ao nível de ligação de dados;
iv) Confidencialidade, com o algoritmo AES\cite{Stallings2005} com 128 bits.
Esta arquitectura utiliza um \textit{trusted center} para gestão da segurança na rede,
implementando um coordenador de rede ZigBee. Este, acreditado por todos os nós da rede, pode
desempenhar três funções: i) Autenticação de nós que pretendem participar na rede; ii) Manutenção e
distribuição de chaves; iii) Providenciar segurança ponto-a-ponto entre nós da rede.
\end{description}